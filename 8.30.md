### âœï¸ í˜¼ì ì—°ìŠµí•˜ë ¤ê³  ê¸°ë¡í•˜ëŠ” ë¸”ë¡œê¹….. ^^

ğŸ¼ ëª°ëë˜ ë¶€ë¶„ & í—·ê°ˆë¦° ë¶€ë¶„ë§Œ ì •ë¦¬
* JOIN -> ì‹¤ì—ì„œ ì—„~~~ì²­ ë§ì´ ì“°ì„!
	   -> ë‘ ê°œì˜ í…Œì´ë¸”ì„ ì—°ê²°í•´ì„œ ë³¼ ìˆ˜ ìˆìŒ!
       -> ê¸°ì¤€ì´ ë˜ëŠ” í‚¤ê°€ í•„ìš”í•¨ ! ê·¸ê±¸ ë§¤ê°œë¡œ ë‘ê°œë¥¼ ë¶™ì„.
 * JOIN: Left join, Inner join ğŸŒ±
 
 * Left join
 ![](https://images.velog.io/images/majaeh43/post/5a7e5689-b3ab-48cf-9efa-741f72f31e47/image.png)
 Aë¥¼ ê¸°ì¤€ìœ¼ë¡œ(ì™¼ìª½ì„ ê¸°ì¤€ìœ¼ë¡œ) Bë¥¼ ë¶™ì¸ë‹¤!
 
 ![](https://images.velog.io/images/majaeh43/post/ee8bbe4a-9dbc-4b59-9a15-b61ad1711075/image.png)
* usersë‘ point_users ë‘ ë ˆí”„íŠ¸ ì¡°ì¸í• ê±°ì•¼. (ê°ê° ë³„ì¹­ ë¶™ì—¬ì£¼ê³ )
* on : ë¬´ì—‡ì„ ê¸°ì¤€ìœ¼ë¡œ ì´ì–´ì£¼ì§€? uì˜ user_idì™€ pì˜ user_idë‘ ì´ì–´ì¥¼!
* NULLê°’ë„ ì¶œë ¥

* Inner join
![](https://images.velog.io/images/majaeh43/post/64091fd6-db54-479f-9311-c374a4e7fcb5/image.png)
Aì™€ Bì˜ êµì§‘í•©!

![](https://images.velog.io/images/majaeh43/post/fe15069e-35b1-400c-ae47-316dd1ff8b8a/image.png)
* inner joinì€ í¬ì¸íŠ¸ê°€ ìˆëŠ” ê²ƒë§Œ ë‚˜ì˜´.(êµì§‘í•©)

ğŸ“Œ ëˆ„êµ¬í•œí…Œ ëˆ„êµ´ ë¶™ì´ëŠëƒê°€ ì •ë§ ì¤‘ìš”í•¨.
inner joinì€ êµì§‘í•©ì´ë‹ˆê¹Œ ë°”ë€Œì–´ë„ ìƒê´€ì—†ìŒ

ğŸŒ± ì‹¤ìŠµ1
![](https://images.velog.io/images/majaeh43/post/5ce1260c-e78c-4e95-b6fb-01de12b57664/image.png)
```
select * from checkins c
inner join users u
on c.user_id = u.user_id
```

ğŸŒ± ì‹¤ìŠµ2
![](https://images.velog.io/images/majaeh43/post/8cf37b41-3312-428c-8dfc-466098d9c2c6/image.png)
```
select * from enrolleds e
inner join courses c
on e.course_id = c.course_id
```

ğŸŒ± ì‹¤ìŠµ3
![](https://images.velog.io/images/majaeh43/post/ac2c7551-1f0b-4018-9d76-f585f3091d4c/image.png)
```
select u.name, count(u.name) as count_name from orders o
inner join users u
on o.user_id = u.user_id 
where u.email like '%naver.com'
group by u.name
```
ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œ: from-> join-> where-> group by-> select

ğŸŒ± í€´ì¦ˆ1
![](https://images.velog.io/images/majaeh43/post/677a9fba-0146-409b-bc73-5d6864c8582d/image.png)
```
select o.payment_method, round(avg(pu.point)) from point_users pu
inner join orders o
on pu.user_id = o.user_id
group by o.payment_method
```

ğŸŒ± í€´ì¦ˆ2
![](https://images.velog.io/images/majaeh43/post/c269fe5c-8139-4b9f-8ec2-6efed3b64a0a/image.png)
```
select u.name, count(en.is_registered) as cnt from enrolleds en
inner join users u
on en.user_id = u.user_id
where en.is_registered = 0
group by 
order by cnt DESC 
```

ğŸŒ± í€´ì¦ˆ3
![](https://images.velog.io/images/majaeh43/post/c05bd9f8-b252-4a87-9da7-c1bd08490864/image.png)
```
select c.course_id, c.title, count(*) as cnt from courses c
inner join enrolleds e 
on c.course_id = e.course_id 
where e.is_registered = 0
group by c.course_id
order by cnt
```
ğŸŒ± í€´ì¦ˆ4
![](https://images.velog.io/images/majaeh43/post/4026757b-528c-449c-b9c0-4b2842e5ce24/image.png)
```
select c1.title, c2.week, count(*) as cnt from courses c1
inner join checkins c2 
on c1.course_id = c2.course_id
group by c1.title, c2.week
order by c1.title, c2.week
```

ğŸŒ± í€´ì¦ˆ5
![](https://images.velog.io/images/majaeh43/post/dbefb4f9-b483-47d4-b1d9-5b68b6bb4fc2/image.png)
```
select c1.title, c2.week, count(*) as cnt from courses c1
inner join checkins c2 on c1.course_id = c2.course_id
inner join orders o on c2.user_id = o.user_id
where o.created_at >= '2020-08-01'
group by c1.title, c2.week
order by c1.title, c2.week

# inner join í•œë²ˆ í•˜ê³  on í•´ì£¼ê³ , inner join ë‘ë²ˆ í•´ì£¼ê³  on í•´ì£¼ê³ !
```
* ê°™ì€ ê²°ê³¼ì— ë„ë‹¬ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—¬ëŸ¬ê°€ì§€!

* left join ì—°ìŠµí•´ë³´ê¸°!
-> í•œìª½ì—ëŠ” ìˆëŠ”ë° í•œìª½ì—ëŠ” ì—†ëŠ” ê±¸ í†µê³„ë‚´ê³  ì‹¶ì„ ë•Œ !

ğŸŒ± í€´ì¦ˆ6
![](https://images.velog.io/images/majaeh43/post/3f46e663-c5a4-4ad5-bb52-4c6529feac0e/image.png)
```
select count(pu.point_user_id) as pnt_user_cnt, count(u.user_id) as tot_user_cnt from users u 
left join point_users pu on u.user_id = pu.user_id
where u.created_at between '2020-07-10' and '2020-07-20'

# ëª¨ë²”ë‹µì•ˆ
select count(pu.point_user_id) as pnt_user_cnt, 
	   count(u.user_id) as tot_user_cnt,
	   round(count(pu.point_user_id)/count(u.user_id),2) as ratio
from users u 
left join point_users pu on u.user_id = pu.user_id
where u.created_at between '2020-07-10' and '2020-07-20'

# ratioë¥¼ êµ¬í•  ë•Œ, ë³„ëª…ìœ¼ë¡œ ê³„ì™ ë„£ìœ¼ë‹ˆê¹Œ ì•ˆëë‹¤. count()/count()ë¡œ í•´ì•¼í•˜ë‚˜ë³´ë‹¤.
```

ğŸ“Œ UNION: select ë‘ ë²ˆ í• ê²Œ ì•„ë‹ˆë¼ í•œë²ˆì— ëª¨ì•„ ë³´ê³  ì‹¶ì„ ë•Œ~~~
![](https://images.velog.io/images/majaeh43/post/8eeb2b36-5176-488c-bcb4-5f4c256809f2/image.png) ìš”ë ‡ê²Œ!

* 7ì›”ê³¼ 8ì›” ê°ê°ì„ ì‡ê³  ì‹¶ë‹¤!
```
select '7ì›”' as month, c1.title, c2.week, count(*) as cnt from courses c1
inner join checkins c2 on c1.course_id = c2.course_id
inner join orders o on c2.user_id = o.user_id
where o.created_at < '2020-08-01'
group by c1.title, c2.week
order by c1.title, c2.week

select '8ì›”' as month, c1.title, c2.week, count(*) as cnt from courses c1
inner join checkins c2 on c1.course_id = c2.course_id
inner join orders o on c2.user_id = o.user_id
where o.created_at >= '2020-08-01'
group by c1.title, c2.week
order by c1.title, c2.week
```
* ì–´ë–»ê²Œ? union all ë¡œ!
![](https://images.velog.io/images/majaeh43/post/8fb748fb-07b0-4a3a-812f-f81ae884784c/image.png)
-> ![](https://images.velog.io/images/majaeh43/post/0411a14b-caac-4901-986b-94222caf4612/image.png)

-> union allì—ì„œ order byê°€ ì•ˆë¨¹ê¸° ë•Œë¬¸ì— ë¹¼ì¤˜ë„ ìƒê´€ì—†ìŒ!

ğŸŒ± ìˆ™ì œ
![](https://images.velog.io/images/majaeh43/post/51ff85a0-c5cd-4058-9a6c-8ff838cee94b/image.png)
```
select en.enrolled_id, en.user_id, count(done) from enrolleds en
inner join enrolleds_detail ed
on en.enrolled_id = ed.enrolled_id
group by ed.enrolled_id
order by done desc
# ë‚˜ëŠ” done=1ì¸ê±¸ ì¡°ê±´ì„ ëª»ê±¸ì–´ì¤Œ.. ê³„ì† ì—ëŸ¬ë‚¨ ã… ã… (where done=1 ì´ ì•„ë‹Œê±¸ê¹Œ..?)
```
ğŸŒ± ìƒ˜ ì„¤ëª…(ì •ë‹µ)
```
select en.enrolled_id, en.user_id, count(*) as cnt from enrolleds en
inner join enrolleds_detail ed
on en.enrolled_id = ed.enrolled_id
where ed.done=1
group by ed.enrolled_id, en.user_id
order by cnt desc

#1. where ed.doneì„ ì™œ ìƒê° ëª»í–ˆì°Œ.. ê³„ì† doneìœ¼ë¡œë§Œ ë„£ì–´ì„œ ì—ëŸ¬...ã… ã… 
#2. group by í•  ë–„, andë¡œ ì—°ê²°í•˜ì§€ ë§ê³  (,)ì½¤ë§ˆë¡œ í•´ì¤„ ê²ƒ!
#3. count(*)í•˜ê³  ë³„ëª… asë¡œ ë¶™ì—¬ì¤„ ê²ƒ!
#4. order by í•  ë•Œ doneë§ê³  cnt ë³„ëª…ìœ¼ë¡œ ê°€ëŠ¥!
```


ğŸŒˆ 3ì£¼ì°¨ ì™„ë£Œ ! inner join, left join ì¬ë°Œë•…!! 4ì£¼ì°¨ ê³ ê³ !
