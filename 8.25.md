## <SQL 첫걸음> 을 보고 직접 학습하고 기록하는 포스트! 🔥
## DATABASE 마스터를 꿈꾸며...🔥
### 🖤 8장 데이터베이스 설계
#### 🖤 34강 데이터베이스 설계

1. 데이터베이스 설계 -> 데이터베이스의 스키마 내에 테이블, 인덱스 뷰 등의 데이터베이스 객체를 정의하는 것.
* 주된 내용: 테이블의 이름이나 열, 자료형을 결정하는 것.
* **'이 테이블은 이 열을 이용해 저쪽 테이블과 연결한다'**와 같이 테이블 간의 관계를 생각하면서 여러 테이블을 정의하고 작성.

2. ER다이어그램
* 개체 간 관계를 표현한 것
* 테이블과 테이블관계 관계(연계-릴레이션십)
ex) 일대일, 일대다, 다대다

#### 🖤 35강 정규화
* 테이블을 올바른 형태로 변경하고 분할하는 것.
* 데이터베이스의 설계 단계에서 행해짐. or 기존 시스템을 재검토할 때 정규화하는 경우도 있음.

1. 정규화
* 정규화는 단계적으로.

2~4. 제1~3정규화
🖤 내가 정리했던 블로깅 참고: https://velog.io/@majaeh43/SQL-normalization%EC%A0%95%EA%B7%9C%ED%99%94%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80

5. 정규화의 목적
* 정규화에서는 중복하거나 반복되는 부분을 찾아내서 테이블을 분할하고 기본키를 작성해 사용하는 것을 기본 개념으로 함! **'하나의 데이터는 한 곳에 있어야 함!'**

#### 🖤 36강 트랜잭션
```
🖤 start transaction
🖤 commit
🖤 rollback
```
* 데이터베이스는 트랜잭션이라는 기능을 제공.
* insert나 update명령으로 데이터를 추가, 갱신할 때도 트랜잭션 기능을 사용.

1. 트랜잭션
- 발주처리
```
🖤 insert into 주문 values(4, '2021-03-01', 1);
🖤 insert into 주문상품 values(4, '0003', 1);
🖤 insert into 주문상품 values(4, '0004', 2);
```
* 예를 들어, insert 명령이 특정 원인으로 인해 에러가 발생하면? 트랜잭션 기능을 사용하지 않으면 insert 명령을 delete 명령을 실행해 지워야함. 

2. 롤백과 커밋
* 트랜잭션을 사용해 데이터를 추가하면 에러가 발생해도 트랜잭션을 롤백해서 종료할 수 있씀!
-> 롤백하면 트랜잭션 내 행해진 모든 변경사항을 없었던 것으로 할 수 있는 것!
-> 아무런 에러가 발생 안하면 변경사항 적용 후 트랜잭션 종료하는데 이때 커밋을 사용함!
-> **트랜잭션을 롤백하면 변경한 내용이 적용되지 않음!**

- 자동커밋
* 트랜잭션을 사용해서 데이터를 추가할 때는 자동커밋을 꺼야함. mysql 클라이언트에서 명령을 실행할 때는 자동커밋이 켜져있는 상태. 
* insert나 update, delete가 처리될 때마다 트랜잭션은 암묵적으로 자동커밋 상태임.
* 자동커밋을 끄려면 트랜잭션의 시작을 선언해야함.
```
🖤 start transaction 🖤
```
* 트랜잭션을 종료하기 위해서는 변경된 내용을 적용한 후에 종료하는 '커밋'과 적용안하구 종료하는 '롤백'의 두 가지 방식이있음!
* 커밋할 때에는 commit 명령 사용!
* 롤백은 rollback 명령 사용!

```
🖤 start transaction;
🖤 insert into 주문 values(4, '2021-03-01', 1);
🖤 insert into 주문상품 values(4, '0003', 1);
🖤 insert into 주문상품 values(4, '0004', 2);
🖤 commit;
```

3. 트랜잭션 사용법
* 발주처리와 같은 데이터 등록처리 과정에서는 대부분 트랜잭션 내에서 여러개의 SQL명령을 실행하게 됨. 
* 반드시 세트로 실행하고 싶은 SQL명령을 트랜잭션에서 하나로 묶어 실행한다는 것! (하나의 명령에 트랜잭션을 걸어 실행하지 않는다는 뜼!)

🖤 내가 정리했던 블로깅 참고: https://velog.io/@majaeh43/Transaction%ED%8A%B8%EB%9E%9C%EC%A0%9D%EC%85%98

💟 정규화와 트랜잭션은 이전에 한 번 공부했던 기억이있는데 새롭게 다시 하는 기분이 드는건 왜일까? CS는 정말 끝이 없는 것 같다. ㅠㅠ 다시 복습하고 익혀놔야지 ! SQL 첫걸음 8장까지 모오두 정리 끝 ! 이제 계속 보고 치면서 연습하는 길 뿐 ! 화이팅 잘해따~~~ 💟
