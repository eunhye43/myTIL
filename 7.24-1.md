ğŸŸ kakao apië¥¼ í™œìš©í•œ social login ğŸŸ
'''
class KakaoLogInView(View):
    def get(self, request):
        try:
            access_token     = request.headers.get('Authorization', None) 
            #í”„ë¡ íŠ¸ì—ì„œ ë°›ì•„ì˜¤ëŠ” í† í°, "Authorization í‚¤ë¡œ ë“¤ì–´ì˜¤ëŠ” ê°’", ì•ˆë“¤ì–´ì˜¤ë©´ None / ê·¸ ê°’ì„ ë³€ìˆ˜ì— ë„£ì–´ì¤„ê±°ì•¼
            headers          = {"Authorization" : f"Bearer {access_token}"} #ê·¼ë° ê·¸ í† í°ì€ í—¤ë”ì— ë‹´ê²¨ ì˜¬ê±°ì•¼
            kakao_login_data = requests.get("https://kapi.kakao.com/v2/user/me", headers=headers).json()
            #í—¤ë”ì— ë‹´ê²¨ì˜¨ í† í°ì„ ê°€ì§€ê³  ì¹´ì¹´ì˜¤ì— ë³´ë‚´ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­í• ê±°ì•¼(requests.get) 
            #ê·¸ë¦¬ê³  ì‘ë‹µì´ì˜¤ë©´(ì‚¬ìš©ìì •ë³´) ê·¸ê±´ jsoní˜•íƒœë¡œ kakao_login_data ë¼ëŠ” ë³€ìˆ˜ì— ë‹´ì„ê±°ì•¼

            if not kakao_login_data:
                return JsonResponse({'Message':"Invalid_token"}, status=401)
            
            kakao_id         = kakao_login_data['id']             
            #ì¹´ì¹´ì˜¤ê°€ ë³´ë‚´ì¤€ ì •ë³´ì—ì„œ, idê°’ì„ kakao_idì— ë‹´ê³ 
            kakao_account    = kakao_login_data['kakao_account']  
            #accountê°’ì„ kakao_accountì— ë‹´ê³ 
            email            = kakao_account['email']             
            #emailê°’ì„ emailì— ë‹´ì„ê±°ì•¼

            if not User.objects.filter(email=email).exists() and email is not None:
                return JsonResponse({'Message':"Invalid_token"}, status=401)

            watta_token      = jwt.encode({'user_id' : kakao_id}, SECRET_KEY, algorithm=ALGORITHM)
            #ê·¸ëŸ¬ë©´ ë§ˆì§€ë§‰ìœ¼ë¡œ watta_tokenì„ ë°œê¸‰í•´ì¤„ê±´ë°, ê·¸ê±´ jwtí˜•ì‹ìœ¼ë¡œ encodeí•´ì„œ ë°œí–‰í• ê±°ì•¼

            return JsonResponse({'message' : 'SUCCESS', 'token' : watta_token}, status=200)
            #returnê°’ìœ¼ë¡œ success message ë³´ë‚¼ê±°ê³ , watta_token ì¤„ê±°ì•¼!

        except json.JSONDecodeError:
            return JsonResponse({"message": "JSONDecodeError"}, status=400)
            #ê·¸ë ‡ì§€ì•Šìœ¼ë©´ jsondecodeerrorê°€ ë‚˜ëŠ”ë° ê·¸ëŸ¬ë©´ ì—ëŸ¬ì•¼~!
'''
