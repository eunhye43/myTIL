## 1. Dockerfile
```
FROM python:3

RUN apt-get update && apt-get -y install \
    libpq-dev

WORKDIR /app
ADD    ./requirements.txt   /app/
RUN    pip install -r requirements.txt
```
## 2. docker-compose.yml
```
version: '3'
# ë²„ì „ (3ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ìµœì‹  ë²„ì „)
services: # ì»¨í…Œì´ë„ˆ ì •ì˜: ì»´í¬ì¦ˆì—ì„œëŠ” ì»¨í…Œì´ë„ˆ ëŒ€ì‹  ì„œë¹„ìŠ¤ë¼ëŠ” ê°œë…ì„ ì‚¬ìš©
  db:
    image: postgres # dockerhubì˜ ê³µì‹ postgres ì´ë¯¸ì§€: postgres
    volumes:
      - ./docker/data:/var/lib/postgresql/data
      # docker runìœ¼ë¡œ dbì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ --volume ì˜µì…˜ì„ ì‚¬ìš©í•´ dbì˜ ë°ì´í„°ë¥¼ ë¡œì»¬ ì»´í„°ì— ì €ì¥í•œ ë¶€ë¶„ê³¼ ê°™ìŒ. docker/data ë””ë ‰í„°ë¦¬ì— ë°ì´í„°ë¥¼ ì €ì¥í•¨.
    environment:
      - POSTGRES_DB=sampledb
      - POSTGRES_USER=sampleuser
      - POSTGRES_PASSWORD=samplesecret
      - POSTGRES_INITDB_ARGS=--encoding=UTF-8

  django: # ì¥ê³ (ì•±ì„œë¹„ìŠ¤)
    build: # dbì™€ ë‹¬ë¦¬ ì•± ì„œë¹„ìŠ¤ëŠ” íŠ¹ì • ì´ë¯¸ì§€ ëŒ€ì‹  build ì˜µì…˜ ì¶”ê°€
      context: . # docker build ëª…ë ¹ì„ ì‹¤í–‰í•  ë””ë ‰í„°ë¦¬ ê²½ë¡œë¼ê³  ë³´ë©´ ë¨
      dockerfile: ./compose/django/Dockerfile-dev # ê°œë°œìš© ë„ì»¤ ì´ë¯¸ì§€ ë¹Œë“œì— ì‚¬ìš©í•  Dockerfileì„ ì§€ì •í•˜ë©´ ë¨. Dockerfile-dev íŒŒì¼ì—ì„œëŠ” (ìš´ì˜ìš© Dockerfileê³¼ëŠ” ë‹¬ë¦¬) ì†ŒìŠ¤ì½”ë“œë¥¼ ì»¨í…Œì´ë„ˆì— ë„£ì§€ ì•ŠìŒ.
    environment: # ê° ê°’ì€ ì•± ì„œë¹„ìŠ¤ì˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •ë˜ê³ , Django ì„¤ì • íŒŒì¼(settings.py)ì—ì„œ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•¨. ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ì •ë³´ë“¤ì€ db ì„œë¹„ìŠ¤ì—ì„œ ì„¤ì •í•œ ê°’ë“¤ê³¼ ì¼ì¹˜í•´ì•¼í•¨.
      - DJANGO_DEBUG=True
      - DJANGO_DB_HOST=db
      - DJANGO_DB_PORT=5432
      - DJANGO_DB_NAME=sampledb
      - DJANGO_DB_USERNAME=sampleuser
      - DJANGO_DB_PASSWORD=samplesecret
      - DJANGO_SECRET_KEY=dev_secret_key
    ports: # í¬íŠ¸ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ (ì™¼: ì™¸ë¶€ì—ì„œ ì»¨í…Œì´ë„ˆ ì—´ê³  ë“¤ì–´ì˜¤ëŠ” í¬íŠ¸/ì˜¤: ë‚´ë¶€ì—°ê²°í¬íŠ¸)
      - "8000:8000"
    command: # docker runìœ¼ë¡œ ì•± ì»¨í…Œì´ë„ˆ ì‹¤í–‰í•  ë•Œ ê°€ì¥ ë§ˆì§€ë§‰ì— ì ì—ˆë–¤ ëª…ë ¹ì–´
      - python manage.py runserver 0:8000
    volumes: # docker runìœ¼ë¡œ ì•± ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ -v ì˜µì…˜ ì‚¬ìš©í•´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ë¥¼ ì»¨í…Œì´ë„ˆ ì•ˆì˜ /app ë””ë ‰í„°ë¦¬ì™€ ì—°ê²°í–ˆë–¤ ë¶€ë¶„ê³¼ ê°™ìŒ.
      - ./:/app/
```
* docker-compose.yml ë‹¤ ì‘ì„±.
```
$ docker-compose up -d
```
* http://127.0.0.1:<í¬íŠ¸ë²ˆí˜¸> ì—¬ê¸°ì— ì ‘ì†í•´ë³´ë©´ ê°œë°œ ì„œë²„ê°€ ì‘ë™ë˜ëŠ” ê²ƒ.



## EC2, Docker ë°°í¬
```
# ec2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ í¬íŠ¸ë²ˆí˜¸ ìƒˆë¡œ í• ë‹¹í•´ì£¼ê¸°
# í• ë‹¹ëœ í¬íŠ¸ë²ˆí˜¸ docker-composeì—ë„ ì¶”ê°€í•´ì£¼ê¸°

$ ssh -i keypair ubuntu@<ipì£¼ì†Œ>
# ìš°ë¶„íˆ¬ë¡œ ì ‘ì†

$ git clone https://github.com/Pre-Onboarding-Listerine/8percent-assignment.git
# git clone ë°›ê¸° (dockerë‘ docker-compose ê¹”ë ¤ìˆëŠ”ì§€ í™•ì¸)
# pip install docker-compose

$ sudo apt-get update
$ sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release
    
$ sudo apt-get update
$ sudo apt-get install docker-ce docker-ce-cli containerd.io
$ apt-cache madison docker-ce
$ sudo apt-get install docker-ce=<VERSION_STRING> docker-ce-cli=<VERSION_STRING> containerd.io

$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

$ docker-compose up
# ì—ëŸ¬ë‚ ë•Œ1
$ sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
# ì—ëŸ¬ë‚ ë•Œ2 (permission denied)
$ sudo chmod 666 /var/run/docker.sock
$ sudo chmod +x /usr/local/bin/docker-compose

$ sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
$ docker-compose up

# docker loginí•˜ê³ ëŠ” ìƒê´€ì—†ìŒ!
# ì—°ê²°ë˜ëŠ”ì§€ í™•ì¸!

>> Successfully built 1c852716fdb0
>> Successfully tagged 8percent-assignment_backend:latest

$ docker-compose down
$ docker-compose up -d
# ë°ëª¬ì—ì„œ ì‹¤í–‰ì‹œì¼œì£¼ê¸°

# public ip : í¬íŠ¸ë²ˆí˜¸
```
* ì˜¤ëŠ˜ ë„ì»¤ ë°°í¬ ì™„ë£Œ ! ì‹œí–‰ì°©ì˜¤ê°€ ë§ì•˜ì§€ë§Œ íŒ€ì›ë¶„ì˜ ë„ì›€ê³¼ ë„ì»¤ ê³µì‹ë¬¸ì„œì˜ ë„ì›€ìœ¼ë¡œ ì™„ë£Œ ! í•­ìƒ ê³µì‹ë¬¸ì„œ ë¨¼ì €ë³´ê¸°ë¥¼ ìŠµê´€í™”í•˜ê¸°...ğŸ’Ÿ
* ë„ì»¤ì™€ì˜ í˜ˆíˆ¬ì—ì„œ 0.8ë§Œí¼ ì´ê¸´ ëŠë‚Œ... ë°°í¬ê°€ ëŠ¥ìˆ™í•´ì§ˆë•Œê¹Œì§€ í˜ë‚´..ğŸ’Ÿ

ì¶œì²˜: docker ê³µì‹ë¬¸ì„œ(https://docs.docker.com/engine/install/ubuntu/)
ì°¸ê³ : ë„ì»¤íŒŒì¼ ì‘ì„±ì‹œ ìœ ì˜ì‚¬í•­(https://velog.io/@seheon99/%EC%B5%9C%EA%B3%A0%EC%9D%98-Dockerfile-%EC%9E%91%EC%84%B1%EC%9D%84-%EC%9C%84%ED%95%9C-%EB%AA%87-%EA%B0%80%EC%A7%80-%EC%8A%B5%EA%B4%80%EB%93%A4)
